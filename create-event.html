<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create New Event - Quick Team</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root { --pink: #fa3c65; }

body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Inter', Arial, sans-serif;
  color: #222;
  background: url("../images/Background.png") no-repeat center center fixed;
  background-size: cover;
  position: relative;
  overflow: hidden;
}

/* Decorative blobs */
.blob {
  position: absolute;
  border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  z-index: -1;
  opacity: 0.22;
}
.blob1 { width: 300px; height: 280px; background: var(--pink); top: -80px; left: -100px; transform: rotate(25deg); }
.blob2 { width: 240px; height: 260px; background: #000; bottom: -100px; right: -60px; transform: rotate(-15deg); }
.blob3 { width: 200px; height: 200px; background: #555; top: 40%; left: -70px; transform: rotate(40deg); }
.blob4 { width: 150px; height: 180px; background: #999; bottom: 20%; right: 30%; transform: rotate(70deg); }

.circle-top-right {
  width: 240px; height: 240px; background: var(--pink);
  position: absolute; top: -100px; right: -100px; border-radius: 50%;
  z-index: -1; opacity: 0.35;
}

/* Event Card / Form */
.event-card {
  background: rgba(255,255,255,0.42);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 1.4rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  padding: 2.5rem 2rem;
  max-width: 600px;
  width: 100%;
  text-align: center;
  z-index: 1;
}

/* Title */
.event-title {
  font-family: 'Montserrat', Arial, sans-serif;
  font-weight: 900;
  font-size: 1.8rem;
  margin-bottom: 2rem;
}
.event-title span { color: var(--pink); }

/* Input fields */
.input-field {
  position: relative;
  margin-bottom: 1.4rem;
  text-align: left;
}
.input-field label {
  font-size: 0.9rem;
  font-weight: 600;
  color: #333;
  display: block;
  margin-bottom: 0.3rem;
}
.input-field input,
.input-field select {
  width: 100%;
  padding: 0.8rem 1rem;
  border: 2px solid transparent;
  border-bottom: 2px solid var(--pink);
  font-size: 1rem;
  font-family: inherit;
  outline: none;
  background: transparent;
  transition: all 0.3s ease;
  box-sizing: border-box;
  border-radius: 0.6rem;
}
.input-field input:focus,
.input-field input:not(:placeholder-shown),
.input-field select:focus,
.input-field select:not(:placeholder-shown) {
  border: 2px solid var(--pink);
}

/* Submit button */
.submit-btn {
  padding: 1rem;
  font-size: 1rem;
  font-weight: 700;
  background: #111827;
  color: #fff;
  border: none;
  border-radius: 2rem;
  cursor: pointer;
  width: 100%;
  margin-top: 0.8rem;
  transition: background 0.2s ease;
}
.submit-btn:hover { background: #232323; }

/* Status message */
#statusMsg {
  margin-top: 1rem;
  font-weight: bold;
  color: var(--pink);
  text-align: center;
}
</style>
</head>
<body>

<!-- Decorative blobs -->
<div class="blob blob1"></div>
<div class="blob blob2"></div>
<div class="blob blob3"></div>
<div class="blob blob4"></div>
<div class="circle-top-right"></div>

<main>
  <div class="event-card">
    <h2 class="event-title">Create <span>New Event</span></h2>

    <form id="createEventForm">
      <div class="input-field">
        <label for="eventName">Event Name:</label>
        <input type="text" id="eventName" required>
      </div>

      <div class="input-field">
        <label for="eventType">Event Type:</label>
        <select id="eventType" required>
          <option value="">Select Type</option>
          <option value="Hackathon">Hackathon</option>
          <option value="AI/ML">AI/ML</option>
          <option value="Frontend">Frontend</option>
          <option value="Backend">Backend</option>
          <option value="UI/UX">UI/UX</option>
          <option value="Mobile">Mobile</option>
        </select>
      </div>

      <div class="input-field">
        <label for="eventDate">Event Date:</label>
        <input type="date" id="eventDate" required>
      </div>

      <div class="input-field">
        <label for="eventSlots">Remaining Slots:</label>
        <input type="number" id="eventSlots" min="1" required>
      </div>

      <div class="input-field">
        <label for="teamMembers">Team Members (comma separated):</label>
        <input type="text" id="teamMembers" required>
      </div>

      <button class="submit-btn" type="submit">Create Event</button>
      <p id="statusMsg"></p>
    </form>
  </div>
</main>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCJdzL6hBxD2JwsXdb2QD6rhJK_MIlFfdg",
  authDomain: "synapse-ee716.firebaseapp.com",
  projectId: "synapse-ee716",
  storageBucket: "synapse-ee716.appspot.com",
  messagingSenderId: "894940754670",
  appId: "1:894940754670:web:88cedd500b4dca5dc9f9ff",
  measurementId: "G-PW7HGF2LTE"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();

const form = document.getElementById("createEventForm");
const statusMsg = document.getElementById("statusMsg");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const eventName = document.getElementById("eventName").value.trim();
  const eventType = document.getElementById("eventType").value;
  const eventDate = document.getElementById("eventDate").value;
  const eventSlots = parseInt(document.getElementById("eventSlots").value);
  const teamMembers = document.getElementById("teamMembers").value
                        .split(",")
                        .map(name => name.trim());

  if (!eventName || !eventType || !eventDate || !eventSlots || teamMembers.length === 0) {
    alert("Please fill all fields correctly.");
    return;
  }

  try {
    // Save event to Firestore
    await db.collection("events").add({
      name: eventName,
      type: eventType,
      date: eventDate,
      remainingSlots: eventSlots,
      teamMembers: teamMembers,
      createdAt: firebase.firestore.FieldValue.serverTimestamp(),
      createdBy: auth.currentUser ? auth.currentUser.uid : "anonymous"
    });

    // Redirect to Event List page
    window.location.href = "event-list.html";

  } catch (error) {
    console.error("Error creating event: ", error);
    statusMsg.textContent = "Error creating event. Try again!";
    statusMsg.style.color = "red";
  }
});
</script>

</body>
</html>
